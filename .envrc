#!/bin/sh

export PATH="$HOME/bin:$HOME/.local/bin${PATH:+:${PATH}}"
export LD_LIBRARY_PATH="/opt/cuda/lib64:$HOME/.local/lib${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}"

[[ -n $(command -v brew) ]] && export PATH="/usr/local/sbin:$PATH"


# SUDO
__t=$(sudo -nv 2>&1)
if [[ $? -eq 0 ]]; then
	:
elif [[ $__t == sudo* ]]; then
	:
else
	export NOSUDO=1
fi
unset __t


# Preferred editor for local and remote sessions
if [[ -n ${SSH_CONNECTION+x} ]]; then
	export EDITOR=vim
else
	export EDITOR=subl
fi


# JAVA
if [[ -z ${JAVA_HOME+x} ]]; then
	if [ -d /usr/lib/jvm/default ]; then
		export JAVA_HOME=/usr/lib/jvm/default
	elif [ -d /usr/lib/jvm/default-java ]; then
		export JAVA_HOME=/usr/lib/jvm/default-java
	# MacOS `brew install java`
	elif [ -d /Library/Java/JavaVirtualMachines/openjdk.jdk/Contents/Home ]; then
		export JAVA_HOME=/Library/Java/JavaVirtualMachines/openjdk.jdk/Contents/Home
	fi
fi


# Conda, anaconda, or mambaforge
if [[ -d $HOME/mambaforge ]]; then
	export CONDA_PATH=$HOME/mambaforge
elif [[ -d /opt/mambaforge ]]; then
	export CONDA_PATH=/opt/mambaforge
# MacOS `brew install mambaforge`
elif [[ -d /usr/local/Caskroom/mambaforge/base ]]; then
	export CONDA_PATH=/usr/local/Caskroom/mambaforge/base
elif [[ -d $HOME/anaconda3 ]]; then
	export CONDA_PATH=$HOME/anaconda3
elif [[ -d /opt/anaconda3 ]]; then
	export CONDA_PATH=/opt/anaconda3
elif [[ -d $HOME/miniconda3 ]]; then
	export CONDA_PATH=$HOME/miniconda3
elif [[ -d /opt/miniconda3 ]]; then
	export CONDA_PATH=/opt/miniconda3
fi


# GPG_TTY
export GPG_TTY="$(tty)"


# Cargo
# rustup shell setup
# affix colons on either side of $PATH to simplify matching
case ":${PATH}:" in
	*:"$HOME/.cargo/bin":*)
		;;
	*)
		# Prepending path in case a system-installed rustc needs to be overridden
		export PATH="$HOME/.cargo/bin:$PATH"
		;;
esac


# wine
if [[ -n $(command -v wine) ]]; then
	export WINEDEBUG=fixme-font
fi


# Custom environment variable
export EVA=ariseus
